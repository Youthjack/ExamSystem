<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lumino - Dashboard</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/datepicker3.css" rel="stylesheet">
    <link href="../css/bootstrap-table.css" rel="stylesheet">
    <link href="../css/styles.css" rel="stylesheet">

    <script type="text/javascript"></script>
    <script type="text/javascript"></script>
    <script type="text/javascript"></script>
    <script type="text/javascript"></script>
    <script type="text/javascript"></script>

    <!--Icons-->
    <script src="js/lumino.glyphs.js" id="index_3"></script>

    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="../js/respond.min.js"></script>
    <![endif]-->

</head>

<body>
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sidebar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"><span>Lumino</span>Admin</a>
            <ul class="user-menu">
                <li class="dropdown pull-right">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><svg class="glyph stroked male-user"><use xlink:href="#stroked-male-user"></use></svg> User <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="#"><svg class="glyph stroked male-user"><use xlink:href="#stroked-male-user"></use></svg> Profile</a></li>
                        <li><a href="#"><svg class="glyph stroked gear"><use xlink:href="#stroked-gear"></use></svg> Settings</a></li>
                        <li><a href="#"><svg class="glyph stroked cancel"><use xlink:href="#stroked-cancel"></use></svg> Logout</a></li>
                    </ul>
                </li>
            </ul>
        </div>

    </div><!-- /.container-fluid -->
</nav>

<div id="sidebar-collapse" class="col-sm-3 col-lg-2 sidebar">
    <form role="search">

    </form>
    <ul class="nav menu">
        <li><a type="button" onclick="indexRedirect()"><svg class="glyph stroked dashboard-dial"><use xlink:href="#stroked-dashboard-dial"></use></svg> 查看用户</a></li>
        <li><a type="button" onclick="addRedirect()"><svg class="glyph stroked calendar"><use xlink:href="#stroked-calendar"></use></svg> 添加用户</a></li>
        <li class="parent ">
            <a href="#">
                <span data-toggle="collapse" href="#sub-item-1"><svg class="glyph stroked chevron-down"><use xlink:href="#stroked-chevron-down"></use></svg></span> Dropdown
            </a>
            <ul class="children collapse" id="sub-item-1">
                <li>
                    <a class="" href="#">
                        <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> Sub Item 1
                    </a>
                </li>
                <li>
                    <a class="" href="#">
                        <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> Sub Item 2
                    </a>
                </li>
                <li>
                    <a class="" href="#">
                        <svg class="glyph stroked chevron-right"><use xlink:href="#stroked-chevron-right"></use></svg> Sub Item 3
                    </a>
                </li>
            </ul>
        </li>
        <li role="presentation" class="divider"></li>
        <li><a href="/login"><svg class="glyph stroked male-user"><use xlink:href="#stroked-male-user"></use></svg> Login Page</a></li>
    </ul>

</div><!--/.sidebar-->

<div id="main" class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
    <div class="row">
        <ol class="breadcrumb">
            <li><a href="#"><svg class="glyph stroked home"><use xlink:href="#stroked-home"></use></svg></a></li>
            <li class="active">用户信息</li>
        </ol>
    </div><!--/.row-->

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">Advanced Table</div>
                <div class="panel-body">
                    <table data-toggle="table" data-url="/manager/see"  data-show-refresh="true" data-show-toggle="true" data-show-columns="true" data-search="true" data-select-item-name="toolbar1" data-pagination="true" data-sort-name="name" data-sort-order="desc">
                        <thead>
                        <tr>
                            <th data-field="id" data-sortable="true">用户号</th>
                            <th data-field="username" data-sortable="true">用户名</th>
                            <th data-field="identity" data-sortable="true">用户身份</th>
                        </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div>
    </div><!--/.row-->
</div>	<!--/.main-->

<script src="../js/jquery-1.11.1.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/chart.min.js"></script>
<script src="../js/chart-data.js"></script>
<script src="../js/easypiechart.js"></script>
<script src="../js/easypiechart-data.js"></script>
<script src="../js/bootstrap-datepicker.js"></script>
<script src="../js/bootstrap-table.js"></script>
<script>
    //innerHTML无法解析javascript这问题怎么解决
    function my_js_reset(){
        var scripts=document.getElementsByTagName("script");
        var parent=scripts[0].parentNode;
        parent.removeChild(scripts[0]);
        parent.removeChild(scripts[1]);
        parent.removeChild(scripts[2]);
        parent.removeChild(scripts[3]);
        parent.removeChild(scripts[4]);
        var head=document.getElementsByTagName("head")[0];
        var index_3=document.getElementById("index_3");
        for(var i=4;i>=0;i--)
            head.insertBefore(document.createElement("script"),index_3);
    }
    function indexRedirect() {
        var htmlcontent=document.getElementById('main');
        htmlcontent.innerHTML='<div class="row"><ol class="breadcrumb"><li><a href="#"><svg class="glyph stroked home">' +
                '<use xlink:href="#stroked-home"></use></svg></a></li> <li class="active">用户信息</li></ol></div><div class="row">' +
                '<div class="col-lg-12"><div class="panel panel-default"><div class="panel-heading">Advanced Table</div>' +
                '<div class="panel-body"><table data-toggle="table" data-url="/manager/see"  data-show-refresh="true" ' +
                'data-show-toggle="true" data-show-columns="true" data-search="true" data-select-item-name="toolbar1" ' +
                'data-pagination="true" data-sort-name="name" data-sort-order="desc"><thead><tr><th data-field="id" ' +
                'data-sortable="true">用户号</th><th data-field="username" data-sortable="true">用户名</th>' +
                '<th data-field="identity" data-sortable="true">用户身份</th></tr></thead></table></div></div></div></div>';
        console.log(htmlcontent);
        var scripts=document.getElementsByTagName("script");
        scripts[0].src="js\/bootstrap.min.js";
        scripts[1].src="js\/bootstrap-datepicker.js";
        scripts[2].src="js\/bootstrap-table.js";
        scripts[3].src="js\/chart.min.js";
        scripts[4].src="js\/jquery-1.11.1.min.js";
        setTimeout(my_js_reset,1000);
        return false;
    }
    function addRedirect(){
        console.log("ajax跳转到添加用户页面");
        var htmlcontent=document.getElementById('main');
        htmlcontent.innerHTML='<div class="row"><ol class="breadcrumb"><li><a href="#"><svg class="glyph stroked home">' +
                '<use xlink:href="#stroked-home"></use></svg></a></li><li class="active">用户操作</li></ol> </div>'+
        '<div class="row"><div class="col-lg-12"><div class="panel panel-default"><div class="panel-body"><div class="col-md-12">' +
                '<form role="form"><div class="form-group"><label>用户名</label><input id="username" name="username" ' +
                'class="form-control" placeholder="username"></div><div class="form-group"><label>密码</label>' +
                '<input id="password" name="password" type="password" class="form-control" placeholder="password"></div>' +
                '<div class="form-group form-horizontal"><label class="radio-inline" ><input id="identity1" type="radio" ' +
                'name="identity" value="">学生</label><label class="radio-inline"><input id="identity2" type="radio" ' +
                'name="identity" value="">老师</label><label class="radio-inline"><input id="identity3" type="radio" ' +
                'name="identity" value="">管理员</label></div><button type="submit" class="btn btn-primary" onclick="add();">' +
                'Submit Button</button><button type="reset" class="btn btn-default">Reset Button</button></div></form></div>' +
                '</div></div><!-- /.col--></div><!-- /.row -->';
        console.log(htmlcontent);
        var scripts=document.getElementsByTagName("script");
        scripts[0].src="..\/js\/bootstrap.min.js";
        scripts[1].src="..\/js\/bootstrap-datepicker.js";
        scripts[2].src="..\/js\/bootstrap-table.js";
        setTimeout(my_js_reset,1000);
        return false;
    }
</script>
<script>
    function add(){
        console.log("login submit");
        console.log(document.getElementsByName('identity').value+" "+document.getElementsByName('remember').value);

        var username=document.getElementById('username').value;
        var password=document.getElementById('password').value;
        if(username.length==0){
            alert("用户名不能为空");
            return false;
        }
        if(password.length<6||password.length>16){
            alert("密码长度不能小于6位或者大于16位");
            return false;
        }
        password=HashEncrypt.SHA1(password,false,false);
        var checked1=$("#identity1").is(':checked');
        var checked2=$("#identity2").is(':checked');
        var checked3=$("#identity3").is(':checked');
        var iden=0;
        console.log(iden);
        console.log(username);
        console.log(password);
        if(checked1){
            iden=1;
        }else if(checked2){
            iden=2;
        }else if(checked3){
            iden=3;
        }else{
            alert("请勾选用户身份");
        }
        if(iden!=0){
            $.ajaxSetup({
                contentType:'application/json'
            });
            $.ajax({
                type:'POST',
                url:'/manager/add',
                data:JSON.stringify([{'username':username,'password':password,'identity':iden}]),
                success:function(data,status){
                    console.log(data);
                },
                error:function(xmlhttprequest,textstatus,errorthrown){
                    console.log(errorthrown);
                }
            });
        }
        return false;
    }
</script>
<script>
    $('#calendar').datepicker({
    });

    !function ($) {
        $(document).on("click","ul.nav li.parent > a > span.icon", function(){
            $(this).find('em:first').toggleClass("glyphicon-minus");
        });
        $(".sidebar span.icon").find('em:first').addClass("glyphicon-plus");
    }(window.jQuery);

    $(window).on('resize', function () {
        if ($(window).width() > 768) $('#sidebar-collapse').collapse('show')
    })
    $(window).on('resize', function () {
        if ($(window).width() <= 767) $('#sidebar-collapse').collapse('hide')
    })
</script>
</body>

</html>